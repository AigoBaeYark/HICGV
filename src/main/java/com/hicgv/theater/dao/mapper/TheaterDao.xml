<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://myba``tis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.hicgv.theater.dao.TheaterDao">
	<select id="theater" resultType="com.hicgv.theater.dto.LocationDto">
		SELECT LOCATION_ID,THEATER_ID,LOCATION_NAME,LOCATION_ADD,LOCATION_TEL
		FROM HICGV_THEATER_LOCATION ORDER BY LOCATION_NAME
	</select>
    <select id="getImg" resultType="String">
		SELECT LOCATION_IMG
		FROM HICGV_THEATER_LOCATION
		WHERE LOCATION_ID=#{param1}
    </select>
    <select id="getMoviesInfo" resultType="com.hicgv.theater.dto.MoviesInfoDto">
		SELECT TITLE_KOR,OPENING_DATE,GENRE,RUNNING_TIME,AGE_LIMIT,ROOM_NAME,MAX_SEAT,START_DATE, HICGV_MOVIE.MOVIE_ID,HICGV_THEATER_ROOM.LOCATION_ID
		FROM HICGV_MOVIE
		LEFT JOIN HICGV_THEATER_ROOM
		ON HICGV_MOVIE.MOVIE_ID=HICGV_THEATER_ROOM.MOVIE_ID
		LEFT JOIN HICGV_THEATER_SCHEDULE
		ON HICGV_THEATER_ROOM.MOVIE_ID=HICGV_THEATER_SCHEDULE.MOVIE_ID
		WHERE HICGV_THEATER_ROOM.LOCATION_ID=#{param1}
		ORDER BY ROOM_NAME
    </select>
    <select id="getLocationInfo" resultType="com.hicgv.theater.dto.LocationDto">
		SELECT DISTINCT LOCATION_NAME,LOCATION_ADD,LOCATION_TEL
		FROM HICGV_THEATER_LOCATION
		LEFT JOIN HICGV_THEATER_ROOM
		ON HICGV_THEATER_LOCATION.LOCATION_ID=HICGV_THEATER_ROOM.LOCATION_ID
		WHERE HICGV_THEATER_LOCATION.LOCATION_ID=#{param1}
    </select>
   
    <select id="getTime" resultType="com.hicgv.theater.dto.TimeInfoDto">
		SELECT RUNNING_TIME,START_DATE,LOCATION_ID,HICGV_MOVIE.MOVIE_ID
		FROM HICGV_MOVIE
		LEFT JOIN HICGV_THEATER_SCHEDULE
		ON HICGV_MOVIE.MOVIE_ID=HICGV_THEATER_SCHEDULE.MOVIE_ID
		WHERE LOCATION_ID=#{param1}
    </select>
</mapper>
